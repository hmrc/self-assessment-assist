summary: Request a HMRC Assist report to be generated for a customer or their agent
description: |
  This endpoint allows a developer to request a HMRC Assist report to be generated for a customer or their agent
tags:
  - Generate Report

parameters:
  - $ref: '../pathParameters/nino.yaml#/components/parameters/nino'
  - $ref: '../pathParameters/calculationId.yaml#/components/parameters/calculationId'
  - $ref: '../header.yaml#/components/parameters/acceptHeader'
  - $ref: '../header.yaml#/components/parameters/authorizationReadScopeHeader'

security:
  - User-Restricted:
      - read:self-assessment

responses:
  "200":
    description: Success
    headers:
      X-CorrelationId:
        $ref: '../header.yaml#/components/parameters/correlationId'
    content:
      application/json:
        schema:
          $ref: '../schemas/selfAssessment/list/list_response.json'
        examples:
          example-response:
            description: Example Response
            value:
              $ref: '../examples/selfAssessment/list/list_response.json'
  "400":
    description: Bad request
    content:
      application/json:
        schema:
          $ref: '../error-response.yaml'
        examples:
          FORMAT_NINO:
            $ref: '../errors.yaml#/components/examples/formatNino'
          FORMAT_CALC_ID:
            $ref: '../errors.yaml#/components/examples/formatCalcId'

  "403":
    description: Forbidden
    content:
      application/json:
        schema:
          $ref: '../error-response.yaml'
        examples:
          CLIENT_OR_AGENT_NOT_AUTHORISED:
            $ref: '../errors.yaml#/components/examples/clientOrAgentNotAuthorised'

  "404":
    description: Not Found
    content:
      application/json:
        schema:
          $ref: '../error-response.yaml'
        examples:
          MATCHING_RESOURCE_NOT_FOUND:
            $ref: '../errors.yaml#/components/examples/matchingResourceNotFound'

  "401":
    description: Unauthorized
    content:
      application/json:
        schema:
          $ref: '../error-response.yaml'
        examples:
          INVALID_CREDENTIALS:
            $ref: '../errors.yaml#/components/examples/invalidCredentials'